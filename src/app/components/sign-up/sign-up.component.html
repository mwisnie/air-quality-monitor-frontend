<div class="container">

  <h2>Sign up</h2>

  <div [hidden]="submitted">
    <form (ngSubmit)="onSubmit(signupForm)" #signupForm="ngForm">

      <div class="form-group">
        <label for="username">Username</label>
        <input class="form-control" type="text" 
                id="username" name="username"
                required
                minlength="4"
                [(ngModel)]="user.username"
                #username="ngModel">
        <div *ngIf="username.invalid && username.dirty"
              class="alert alert-danger">
          <div *ngIf="username.errors.required">
            Username is required.
          </div>
          <div *ngIf="username.errors.minlength">
            Username must have at least 4 characters.
          </div>
              
        </div>
      </div>

      <div class="form-group">
        <label for="password">Password</label>
        <input class="form-control" type="password" 
              id="password" name="password"
              required
              minlength="8"
              [(ngModel)]="user.password"
              #password="ngModel">
        <div class="alert alert-danger"
                [hidden]="password.valid || password.pristine">
            Password error
        </div>
      </div>

      <div class="form-group">
        <label for="repeatedPassword">Repeat password</label>
        <input class="form-control" type="password" 
              id="repeatedPassword" name="repeatedPassword"
              required
              #repeatedPassword>

      </div>

      <div class="form-group">
        <label for="email">Email</label>
        <input class="form-control" type="email" 
              id="email" name="email"
              required
              [(ngModel)]="user.email"
              #email="ngModel">
        <div class="alert alert-danger"
                [hidden]="email.valid || email.pristine">
            Email
        </div>
      </div>

      <button class="btn btn-success" type="submit"
              [disabled]="!signupForm.form.valid || repeatedPassword.value !== password.value">
        Submit
      </button>

    </form>
  </div> 

  <div [hidden]="!submitted">
    <h3>Account was created.</h3>
    <div class="col-md-4">Username</div>
    <div class="col-md-8 pull-left">{{ user.username }}</div>

    <div class="col-md-4">Email</div>
    <div class="col-md-8 pull-left">{{ user.email }}</div>

    <p>Check your email for a link to activate the account</p>
  </div>
</div>